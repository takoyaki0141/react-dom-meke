function renderPreferredDays($schedules){
    foreach($schedules as $index => $schedule){
        $id = "preferred_day" . ($index + 1);
        $is_closed = isClosed($schedule);

        $replaced = replaceToHTML($schedule);
        $scheduleValue = htmlspecialchars($replaced['value'], ENT_QUOTES, 'UTF-8');
        $scheduleHTML = htmlspecialchars($replaced['html'], ENT_QUOTES, 'UTF-8');

        if($is_closed){
            echo '<strike style="font-size: 1.3rem;">' . $scheduleHTML . '</strike>';
            echo '<span style="font-size: 1.3rem; margin-left:-0.2rem;">&emsp;<wbr><nobr>受付を締め切りました</nobr></span><br>';
        } else {
            echo '<input type="radio" name="preferred_day" id="' . htmlspecialchars($id, ENT_QUOTES, 'UTF-8') . '" value="' . $scheduleValue . '">';
            echo '<label for="' . htmlspecialchars($id, ENT_QUOTES, 'UTF-8') . '" class="radio_box">' . $scheduleHTML . '</label><br>';
        }
    }

    echo '<input type="radio" name="preferred_day" id="another_day" value="another_day">';
    echo '<label for="another_day" class="radio_box">別日開催希望<wbr><nobr>（開催日決まり次第、ご連絡差し上げます）</nobr></label>';
}



if (!empty($_POST['preferred_day'])) {
    $preferred_day = $_POST['preferred_day'];

    // HTMLエスケープ（念のため）
    $preferred_day = htmlspecialchars($preferred_day, ENT_QUOTES, 'UTF-8');

    if ($preferred_day == "another_day") {
        $preferred_day = "別日開催希望";
    }
}
